package stepDefinitions.sessionExpiry_TC16;

import org.openqa.selenium.WebDriver;
import org.openqa.selenium.By;
import org.testng.Assert;
import io.cucumber.java.en.Given;
import io.cucumber.java.en.When;
import io.cucumber.java.en.Then;
import stepDefinitions.accountSummary_TC4.AccountSummaryLoginSteps_TC4;

public class SessionExpirySteps_TC16 {

    WebDriver driver = AccountSummaryLoginSteps_TC4.getDriver(); 

    @Given("User is logged into the application")
    public void user_is_logged_into_application() {
        driver.get("https://example.com/login"); 
        driver.findElement(By.id("username")).sendKeys("testuser"); 
        driver.findElement(By.id("password")).sendKeys("testpassword");
        driver.findElement(By.id("login_button")).click(); 
    }

    @When("User logs out of the application")
    public void user_logs_out_of_application() {
        driver.findElement(By.id("logout_button")).click(); 
    }

    @When("User clicks the Back button in the browser")
    public void user_clicks_back_button() {
        driver.navigate().back();
    }

    @Then("User should not be able to access the previous page")
    public void verify_session_expiry() {
        String currentURL = driver.getCurrentUrl();
        Assert.assertTrue(currentURL.contains("login"), "Session Expiry Test Failed: User can still access previous page!");
    }
}
