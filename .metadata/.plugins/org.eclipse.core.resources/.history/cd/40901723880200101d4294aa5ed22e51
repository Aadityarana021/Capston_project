package stepDefinitions.accountSummary_TC6;

import io.cucumber.java.en.When;
import io.cucumber.java.en.Then;
import org.openqa.selenium.WebDriver;
import org.testng.Assert;
import pageObjects.ValidateAccountBalancesPage_TC6;
import stepDefinitions.accountSummary_TC5.ValidateAccountTypesSteps_TC5; // ✅ Import TC5

public class ValidateAccountBalancesSteps_TC6 {

    WebDriver driver;
    ValidateAccountBalancesPage_TC6 transferFundsPage;

    public ValidateAccountBalancesSteps_TC6() {
        this.driver = ValidateAccountTypesSteps_TC5.getDriver(); // ✅ Use existing driver from TC5
        transferFundsPage = new ValidateAccountBalancesPage_TC6(driver);
    }

    @When("User navigates to Transfer Funds page")
    public void user_navigates_to_transfer_funds() {
        transferFundsPage.navigateToTransferFunds(); // ✅ Start from Account Summary
    }

    @When("User selects From Account and To Account")
    public void user_selects_accounts() {
        transferFundsPage.selectAccountsAndAmount(); // ✅ Select Accounts & Amount
    }

    @When("User clicks on Continue")
    public void user_clicks_continue() {
        transferFundsPage.clickSubmit(); // ✅ Click Submit
    }

    @Then("User should see the transfer confirmation")
    public void verify_transfer_success() {
        String successMsg = transferFundsPage.getSuccessMessage();
        Assert.assertTrue(successMsg.contains("You successfully transferred"), "Transfer not successful!");
    }
}
