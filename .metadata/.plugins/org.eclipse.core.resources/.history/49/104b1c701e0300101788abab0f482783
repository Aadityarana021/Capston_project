package stepDefinitions.accountSummary_TC10;

import io.cucumber.java.en.Then;
import io.cucumber.java.en.When;
import org.openqa.selenium.WebDriver;
import org.testng.Assert;
import pageObjects.FundTransferFuturePaymentPage_TC10;
import stepDefinitions.accountSummary_TC4.AccountSummaryLoginSteps_TC4;

public class FundTransferFuturePaymentSteps_TC10 {
    WebDriver driver = AccountSummaryLoginSteps_TC4.getDriver();  // ✅ Use existing driver session
    FundTransferFuturePaymentPage_TC10 futurePaymentPage;

    public FundTransferFuturePaymentSteps_TC10() {
        futurePaymentPage = new FundTransferFuturePaymentPage_TC10(driver);
    }

    @When("User navigates to Pay Bills page for Future Payment")
    public void user_navigates_to_pay_bills_page() {
        futurePaymentPage.navigateToPayBills();
    }

    @When("User selects a payee")
    public void user_selects_a_payee() {
        futurePaymentPage.selectPayee();
    }

    @When("User enters a valid amount {string}")
    public void user_enters_valid_amount(String amount) {
        futurePaymentPage.enterAmount(amount);
    }

    @When("User selects a future date {string}")
    public void user_selects_a_future_date(String date) {
        futurePaymentPage.enterDate(date);
    }

    @When("User clicks Pay for Future Payment")
    public void user_clicks_pay() {
        futurePaymentPage.clickPay();
    }

    @Then("User should see a success message {string}")
    public void verify_success_message(String expectedMessage) {
        String actualMessage = futurePaymentPage.getSuccessMessage();
        
        System.out.println("Expected: " + expectedMessage);
        System.out.println("Actual: " + actualMessage);
        
        Assert.assertTrue(actualMessage.contains(expectedMessage), "❌ Payment scheduling failed!");
        
        System.out.println("✅ Payment successfully scheduled.");
    }
}
